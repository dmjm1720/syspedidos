<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//ES" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	xmlns:f="http://xmlns.jcp.org/jsf/core">
<h:head>
	<title>Login</title>
	<h:outputStylesheet name="css/login.css"></h:outputStylesheet>
</h:head>
<h:body>
	<div class="login">
		<h:form id="formLogin" style="text-align: center">
			<p:growl id="mensajeGeneral" sticky="true" autoUpdate="true"
				showDetail="true" life="3000" />
			<p:panel header="SISTEMA DE PEDIDOS" widgetVar="dlg">
				<h:panelGrid columns="1" cellpadding="5">
					<h:graphicImage url="/Images/login.png"
						style="width: 150px; height: 150px" />
					<p:inputText id="usuario" style="width: 350px"
						value="#{loginBean.usuarios.rfc}" placeholder="Ingresa tu rfc"
						required="true" label="username"
						requiredMessage="Requiere Usuario"
						onkeyup="javascript:this.value = this.value.toUpperCase();" />
					<p:password id="password" style="width: 350px"
						placeholder="Ingresa tu password"
						value="#{loginBean.usuarios.password}" required="true"
						label="password" requiredMessage="Requiere Password" />
					<f:facet name="footer">
						<br></br>
						<p:commandButton id="inicio" style="width: 350px" update="@form"
							value="Iniciar sesión" actionListener="#{loginBean.login(event)}"
							oncomplete="handleLoginRequest(xhr, status, args)">
						</p:commandButton>
						<p:tooltip id="toolTipTrack" for="inicio" value="Iniciar sesión"
							trackMouse="true"></p:tooltip>
						<p:tooltip id="toolTipTrack1" for="password"
							value="Introduce tu contraseña" trackMouse="true"></p:tooltip>
						<p:tooltip id="toolTipTrack2" for="usuario"
							value="Introduce tu usuario" trackMouse="true"></p:tooltip>
					</f:facet>
				</h:panelGrid>
			</p:panel>
		</h:form>
	</div>
	<script type="text/javascript">
            function handleLoginRequest(xhr, status, args) {
                if (args.validationFailed || !args.loggedIn) {
                    jQuery('#formLogin').jq.effect("shake", {times: 1}, 100);
                    jQuery('#formLogin')[0].reset();  // Reiniciar el formulario
                } else {
                    location.href = args.ruta;
                }
            }
        </script>

</h:body>
</html>
